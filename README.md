# Cedar Policy Repository

This repository has been initialized with Cedar Studio - a development environment for Amazon Cedar authorization policies.

## ğŸ“ Structure

```
cedar/
â”œâ”€â”€ schema/
â”‚   â””â”€â”€ main.cedarschema                # Entity and action definitions
â”œâ”€â”€ policies/
â”‚   â”œâ”€â”€ user-self-view.cedar            # Users viewing their own profiles
â”‚   â”œâ”€â”€ admin-user-management.cedar     # Admin full user management
â”‚   â”œâ”€â”€ manager-department-view.cedar   # Managers viewing department users
â”‚   â””â”€â”€ hr-user-management.cedar        # HR managing employee records
â”œâ”€â”€ templates/
â”‚   â””â”€â”€ access-template.cedart          # Reusable access control patterns
â””â”€â”€ examples/
    â””â”€â”€ basic-usage.cedar               # Simple policy examples
```

## ğŸš€ Getting Started

### 1. Review the Schema

Start by examining `cedar/schema/main.cedarschema` to understand the entities (User, Document, Group, Resource) and actions (view, edit, delete, share, manage) defined for your application.

### 2. Customize Policies

The `policies/` directory contains starter authorization policies organized by use case:

- **user-self-view.cedar**: Allows users to view their own profiles
- **admin-user-management.cedar**: Grants admins full access to manage all users
- **manager-department-view.cedar**: Allows managers to view users in their department
- **hr-user-management.cedar**: Grants HR staff permission to manage employee records

Each policy file includes metadata annotations (see Policy Metadata section below). Modify these policies and add new ones to match your application's requirements.

### 3. Use Templates

Check the `templates/` directory for reusable policy patterns that you can adapt for your specific use cases.

### 4. Learn from Examples

The `examples/` directory contains Cedar policy examples to help you understand policy syntax and patterns.

## ğŸ“‹ Policy Metadata Annotations

Cedar Studio uses special comment-based annotations to track policy metadata. Add these annotations at the top of your policy files:

```cedar
// @id("unique-policy-id")
// @description("Brief description of what this policy does")
// @tag("category1")
// @tag("category2")
// @author("Your Name or Team")

// Your Cedar policy here
permit(...)
```

### Annotation Reference

- **@id("...")**: Unique identifier for the policy (required for tracking)
- **@description("...")**: Human-readable description of the policy's purpose
- **@tag("...")**: Category tags for organization (can have multiple)
- **@author("...")**: Policy author or team name

### Example

```cedar
// @id("user-profile-access")
// @description("Allows users to access their own profile data")
// @tag("user-management")
// @tag("self-service")
// @author("Security Team")

permit(
  principal,
  action == CedarStudio::Action::"view",
  resource
)
when {
  principal == resource.owner
};
```

These annotations are automatically extracted and stored in the Cedar Studio database for policy tracking, search, and organization.

## ğŸ”§ Working with Cedar Policies

### Validate Policies

```bash
cedar validate --schema cedar/schema/main.cedarschema --policies cedar/policies/
```

### Format Policies

```bash
cedar format --policies cedar/policies/
```

### Test Authorization

```bash
cedar authorize --schema cedar/schema/main.cedarschema \
                --policies cedar/policies/ \
                --principal 'User::"alice"' \
                --action 'Action::"view"' \
                --resource 'Document::"doc1"'
```

## ğŸ“š Resources

- [Cedar Documentation](https://docs.cedarpolicy.com/)
- [Cedar Policy Language Guide](https://docs.cedarpolicy.com/policies/syntax.html)
- [Cedar Schema Guide](https://docs.cedarpolicy.com/schema/schema.html)
- [Cedar Policy Validation](https://docs.cedarpolicy.com/policies/validation.html)

## âš™ï¸ Workspace Configuration

The `workspace.config.json` file contains Cedar Studio-specific settings for this repository. You can customize:

- Auto-validation settings
- Policy formatting options
- Integration preferences

## ğŸ¤ Contributing

When adding new policies:

1. Follow the existing naming conventions (descriptive, kebab-case)
2. **Add metadata annotations** (@id, @description, @tag, @author) at the top of the file
3. Add comments explaining the policy's logic and purpose
4. Test policies before committing using `cedar validate`
5. Update this README if adding new policy categories
6. Keep one logical policy per file for better organization and tracking

## ğŸ“ Notes

- This structure follows Cedar best practices
- Policies are organized by functional area
- Templates promote code reuse and consistency
- Examples serve as learning material and quick reference

---

**Generated by [Cedar Studio](https://cedar.studio)**
Need help? Visit our [documentation](https://docs.cedar.studio) or [support](https://support.cedar.studio)
